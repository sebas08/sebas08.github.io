jQuery(document).ready(function(e){function i(e,i){e.css({"-moz-transform":i,"-webkit-transform":i,"-ms-transform":i,"-o-transform":i,transform:i})}var n=function(e){this.element=e,this.handleContainer=this.element.find(".cd-product-viewer-handle"),this.handleFill=this.handleContainer.children(".fill"),this.handle=this.handleContainer.children(".handle"),this.imageWrapper=this.element.find(".product-viewer"),this.slideShow=this.imageWrapper.children(".product-sprite"),this.frames=this.element.data("frame"),this.friction=this.element.data("friction"),this.visibleFrame=0,this.loaded=!1,this.animating=!1,this.xPosition=0,this.loadFrames()};n.prototype.loadFrames=function(){var i=this,n=this.slideShow.data("image"),s=e("<img/>");this.loading("0.5"),s.load(function(){e(this).remove(),i.loaded=!0}),setTimeout(function(){s.attr("src",n)},50)},n.prototype.loading=function(e){var n=this;i(this.handleFill,"scaleX("+e+")"),setTimeout(function(){if(n.loaded)n.element.addClass("loaded"),i(n.handleFill,"scaleX(1)"),n.dragImage(),n.handle&&n.dragHandle();else{var s=parseFloat(e)+.1;1>s&&n.loading(s)}},500)},n.prototype.dragHandle=function(){var e=this;e.handle.on("mousedown vmousedown",function(i){e.handle.addClass("cd-draggable");var n=e.handle.outerWidth(),s=e.handleContainer.offset().left,t=e.handleContainer.outerWidth(),a=s-n/2,r=s+t-n/2;e.xPosition=e.handle.offset().left+n-i.pageX,e.element.on("mousemove vmousemove",function(i){e.animating||(e.animating=!0,window.requestAnimationFrame?requestAnimationFrame(function(){e.animateDraggedHandle(i,n,s,t,a,r)}):setTimeout(function(){e.animateDraggedHandle(i,n,s,t,a,r)},100))}).one("mouseup vmouseup",function(){e.handle.removeClass("cd-draggable"),e.element.off("mousemove vmousemove")}),i.preventDefault()}).on("mouseup vmouseup",function(){e.handle.removeClass("cd-draggable")})},n.prototype.animateDraggedHandle=function(i,n,s,t,a,r){var o=this,l=i.pageX+o.xPosition-n;a>l?l=a:l>r&&(l=r);var d=Math.ceil(1e3*(l+n/2-s)/t)/10;o.visibleFrame=Math.ceil(d*(o.frames-1)/100),o.updateFrame(),e(".cd-draggable",o.handleContainer).css("left",d+"%").one("mouseup vmouseup",function(){e(this).removeClass("cd-draggable")}),o.animating=!1},n.prototype.dragImage=function(){var e=this;e.slideShow.on("mousedown vmousedown",function(i){e.slideShow.addClass("cd-draggable");var n=e.imageWrapper.offset().left,s=e.imageWrapper.outerWidth();e.frames-1;e.xPosition=i.pageX,e.element.on("mousemove vmousemove",function(i){e.animating||(e.animating=!0,window.requestAnimationFrame?requestAnimationFrame(function(){e.animateDraggedImage(i,n,s)}):setTimeout(function(){e.animateDraggedImage(i,n,s)},100))}).one("mouseup vmouseup",function(){e.slideShow.removeClass("cd-draggable"),e.element.off("mousemove vmousemove"),e.updateHandle()}),i.preventDefault()}).on("mouseup vmouseup",function(){e.slideShow.removeClass("cd-draggable")})},n.prototype.animateDraggedImage=function(e,i,n){var s=this,t=s.xPosition-e.pageX,a=Math.ceil(100*t/(n*s.friction)),r=a*(s.frames-1)/100;r=r>0?Math.floor(r):Math.ceil(r);var o=s.visibleFrame+r;0>o?o=s.frames-1:o>s.frames-1&&(o=0),o!=s.visibleFrame&&(s.visibleFrame=o,s.updateFrame(),s.xPosition=e.pageX),s.animating=!1},n.prototype.updateHandle=function(){if(this.handle){var e=100*this.visibleFrame/this.frames;this.handle.animate({left:e+"%"},200)}},n.prototype.updateFrame=function(){var e=-(100*this.visibleFrame/this.frames);i(this.slideShow,"translateX("+e+"%)")};var s=e(".cd-product-viewer-wrapper");s.each(function(){new n(e(this))})}),jQuery(document).ready(function(){if($(".cd-stretchy-nav").length>0){var e=$(".cd-stretchy-nav");e.each(function(){var e=$(this),i=e.find(".cd-nav-trigger");i.on("click",function(i){i.preventDefault(),e.toggleClass("nav-is-visible")})}),$(document).on("click",function(i){!$(i.target).is(".cd-nav-trigger")&&!$(i.target).is(".cd-nav-trigger span")&&e.removeClass("nav-is-visible")})}}),jQuery(document).ready(function(e){function n(){s(e(".cd-headline.letters").find("b")),t(e(".cd-headline"))}function s(n){n.each(function(){var n=e(this),s=n.text().split(""),t=n.hasClass("is-visible");for(i in s)n.parents(".rotate-2").length>0&&(s[i]="<em>"+s[i]+"</em>"),s[i]=t?'<i class="in">'+s[i]+"</i>":"<i>"+s[i]+"</i>";var a=s.join("");n.html(a).css("opacity",1)})}function t(i){var n=u;i.each(function(){var i=e(this);if(i.hasClass("loading-bar"))n=m,setTimeout(function(){i.find(".cd-words-wrapper").addClass("is-loading")},h);else if(i.hasClass("clip")){var s=i.find(".cd-words-wrapper"),t=s.width()+10;s.css("width",t)}else if(!i.hasClass("type")){var r=i.find(".cd-words-wrapper b"),o=0;r.each(function(){var i=e(this).width();i>o&&(o=i)}),i.find(".cd-words-wrapper").css("width",o)}setTimeout(function(){a(i.find(".is-visible").eq(0))},n)})}function a(e){var i=d(e);if(e.parents(".cd-headline").hasClass("type")){var n=e.parent(".cd-words-wrapper");n.addClass("selected").removeClass("waiting"),setTimeout(function(){n.removeClass("selected"),e.removeClass("is-visible").addClass("is-hidden").children("i").removeClass("in").addClass("out")},v),setTimeout(function(){r(i,f)},g)}else if(e.parents(".cd-headline").hasClass("letters")){var s=e.children("i").length>=i.children("i").length?!0:!1;o(e.find("i").eq(0),e,s,p),l(i.find("i").eq(0),i,s,p)}else e.parents(".cd-headline").hasClass("clip")?e.parents(".cd-words-wrapper").animate({width:"2px"},C,function(){c(e,i),r(i)}):e.parents(".cd-headline").hasClass("loading-bar")?(e.parents(".cd-words-wrapper").removeClass("is-loading"),c(e,i),setTimeout(function(){a(i)},m),setTimeout(function(){e.parents(".cd-words-wrapper").addClass("is-loading")},h)):(c(e,i),setTimeout(function(){a(i)},u))}function r(e,i){e.parents(".cd-headline").hasClass("type")?(l(e.find("i").eq(0),e,!1,i),e.addClass("is-visible").removeClass("is-hidden")):e.parents(".cd-headline").hasClass("clip")&&e.parents(".cd-words-wrapper").animate({width:e.width()+10},C,function(){setTimeout(function(){a(e)},w)})}function o(i,n,s,t){if(i.removeClass("in").addClass("out"),i.is(":last-child")?s&&setTimeout(function(){a(d(n))},u):setTimeout(function(){o(i.next(),n,s,t)},t),i.is(":last-child")&&e("html").hasClass("no-csstransitions")){var r=d(n);c(n,r)}}function l(e,i,n,s){e.addClass("in").removeClass("out"),e.is(":last-child")?(i.parents(".cd-headline").hasClass("type")&&setTimeout(function(){i.parents(".cd-words-wrapper").addClass("waiting")},200),n||setTimeout(function(){a(i)},u)):setTimeout(function(){l(e.next(),i,n,s)},s)}function d(e){return e.is(":last-child")?e.parent().children().eq(0):e.next()}function c(e,i){e.removeClass("is-visible").addClass("is-hidden"),i.removeClass("is-hidden").addClass("is-visible")}var u=2500,m=3800,h=m-3e3,p=50,f=150,v=500,g=v+800,C=600,w=1500;n()}),jQuery(document).ready(function(){function e(i){i.length>0&&setTimeout(function(){i.addClass("slides-in"),e(i.next())},50)}function i(){return window.getComputedStyle(document.querySelector(".cd-projects-wrapper"),"::before").getPropertyValue("content").replace(/'/g,"").replace(/"/g,"")}function n(){var e=i();if("desktop"==e){var n=c.children("li"),s=n.eq(0).width(),t=Number(c.children("li").eq(1).css("margin-left").replace("px","")),a=(s+t)*(n.length+1)+"px",r=c.children("li.current").index();c.css("width",a),0!=r&&o(c,r*(s+t)+"px")}else c.css("width",""),o(c,0);h=!1}function s(e){var i=e.children(".current"),n=i.index(),s=i.nextAll("li").length,t=i.width(),r=Number(e.children("li").eq(1).css("margin-left").replace("px",""));n=s>4?n+3:n+s-2,translate=n*(t+r)+"px",e.addClass("next"),o(e,translate),e.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){a("next",i,e,s)}),$(".no-csstransitions").length>0&&a("next",i,e,s)}function t(e){var i=e.children(".previous"),n=i.index(),s=i.width(),t=Number(e.children("li").eq(1).css("margin-left").replace("px",""));translate=n*(s+t)+"px",e.addClass("prev"),o(e,translate),e.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){a("prev",i,e)}),$(".no-csstransitions").length>0&&a("prev",i,e)}function a(e,i,n,s){"next"==e?(n.removeClass("next").find(".previous").removeClass("previous"),i.removeClass("current"),s>4?i.addClass("previous").next("li").next("li").next("li").addClass("current"):4==s?i.next("li").next("li").addClass("current").prev("li").prev("li").addClass("previous"):i.next("li").addClass("current").end().addClass("previous")):(n.removeClass("prev").find(".current").removeClass("current"),i.removeClass("previous").addClass("current"),i.prevAll("li").length>2?i.prev("li").prev("li").prev("li").addClass("previous"):!n.children("li").eq(0).hasClass("current")&&n.children("li").eq(0).addClass("previous")),r()}function r(){var e=d.find("li.current");e.is(":first-child")?m.find(".prev").addClass("inactive"):m.find(".prev").removeClass("inactive"),e.nextAll("li").length<3?m.find(".next").addClass("inactive"):m.find(".next").removeClass("inactive")}function o(e,i){e.css({"-moz-transform":"translateX(-"+i+")","-webkit-transform":"translateX(-"+i+")","-ms-transform":"translateX(-"+i+")","-o-transform":"translateX(-"+i+")",transform:"translateX(-"+i+")"})}var l=$(".cd-intro-block"),d=$(".cd-projects-wrapper"),c=d.children(".cd-slider"),u=$(".cd-project-content"),m=$(".cd-slider-navigation"),h=!1;n(),$(window).on("resize",function(){h||(window.requestAnimationFrame?window.requestAnimationFrame(n):n(),h=!0)}),l.on("click",'a[data-action="show-projects"]',function(i){i.preventDefault(),l.addClass("projects-visible"),d.addClass("projects-visible"),setTimeout(function(){e(c.children("li").eq(0))},200)}),l.on("click",function(e){l.hasClass("projects-visible")&&!$(e.target).is('a[data-action="show-projects"]')&&(l.removeClass("projects-visible"),d.removeClass("projects-visible"))}),d.on("click",".cd-slider a",function(e){var n=i();e.preventDefault(),$(this).parent("li").next("li").is(".current")&&"desktop"==n?t(c):$(this).parent("li").prev("li").prev("li").prev("li").is(".current")&&"desktop"==n?s(c):u.addClass("is-visible")}),u.on("click",".close",function(e){e.preventDefault(),u.removeClass("is-visible")}),m.on("click",".next",function(){s(c)}),m.on("click",".prev",function(){t(c)}),$(document).keyup(function(e){var n=i();"37"==e.which&&l.hasClass("projects-visible")&&!m.find(".prev").hasClass("inactive")&&"desktop"==n?t(c):"39"==e.which&&l.hasClass("projects-visible")&&!m.find(".next").hasClass("inactive")&&"desktop"==n?s(c):"27"==e.which&&u.hasClass("is-visible")&&u.removeClass("is-visible")}),c.on("swipeleft",function(){var e=i();m.find(".next").hasClass("inactive")||"desktop"!=e||s(c)}),c.on("swiperight",function(){var e=i();m.find(".prev").hasClass("inactive")||"desktop"!=e||t(c)})});
