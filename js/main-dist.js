jQuery(document).ready(function(e){function i(e,i){e.css({"-moz-transform":i,"-webkit-transform":i,"-ms-transform":i,"-o-transform":i,transform:i})}var n=function(e){this.element=e,this.handleContainer=this.element.find(".cd-product-viewer-handle"),this.handleFill=this.handleContainer.children(".fill"),this.handle=this.handleContainer.children(".handle"),this.imageWrapper=this.element.find(".product-viewer"),this.slideShow=this.imageWrapper.children(".product-sprite"),this.frames=this.element.data("frame"),this.friction=this.element.data("friction"),this.visibleFrame=0,this.loaded=!1,this.animating=!1,this.xPosition=0,this.loadFrames()};n.prototype.loadFrames=function(){var i=this,n=this.slideShow.data("image"),t=e("<img/>");this.loading("0.5"),t.load(function(){e(this).remove(),i.loaded=!0}),setTimeout(function(){t.attr("src",n)},50)},n.prototype.loading=function(e){var n=this;i(this.handleFill,"scaleX("+e+")"),setTimeout(function(){if(n.loaded)n.element.addClass("loaded"),i(n.handleFill,"scaleX(1)"),n.dragImage(),n.handle&&n.dragHandle();else{var t=parseFloat(e)+.1;1>t&&n.loading(t)}},500)},n.prototype.dragHandle=function(){var e=this;e.handle.on("mousedown vmousedown",function(i){e.handle.addClass("cd-draggable");var n=e.handle.outerWidth(),t=e.handleContainer.offset().left,a=e.handleContainer.outerWidth(),s=t-n/2,r=t+a-n/2;e.xPosition=e.handle.offset().left+n-i.pageX,e.element.on("mousemove vmousemove",function(i){e.animating||(e.animating=!0,window.requestAnimationFrame?requestAnimationFrame(function(){e.animateDraggedHandle(i,n,t,a,s,r)}):setTimeout(function(){e.animateDraggedHandle(i,n,t,a,s,r)},100))}).one("mouseup vmouseup",function(){e.handle.removeClass("cd-draggable"),e.element.off("mousemove vmousemove")}),i.preventDefault()}).on("mouseup vmouseup",function(){e.handle.removeClass("cd-draggable")})},n.prototype.animateDraggedHandle=function(i,n,t,a,s,r){var o=this,l=i.pageX+o.xPosition-n;s>l?l=s:l>r&&(l=r);var d=Math.ceil(1e3*(l+n/2-t)/a)/10;o.visibleFrame=Math.ceil(d*(o.frames-1)/100),o.updateFrame(),e(".cd-draggable",o.handleContainer).css("left",d+"%").one("mouseup vmouseup",function(){e(this).removeClass("cd-draggable")}),o.animating=!1},n.prototype.dragImage=function(){var e=this;e.slideShow.on("mousedown vmousedown",function(i){e.slideShow.addClass("cd-draggable");var n=e.imageWrapper.offset().left,t=e.imageWrapper.outerWidth();e.frames-1;e.xPosition=i.pageX,e.element.on("mousemove vmousemove",function(i){e.animating||(e.animating=!0,window.requestAnimationFrame?requestAnimationFrame(function(){e.animateDraggedImage(i,n,t)}):setTimeout(function(){e.animateDraggedImage(i,n,t)},100))}).one("mouseup vmouseup",function(){e.slideShow.removeClass("cd-draggable"),e.element.off("mousemove vmousemove"),e.updateHandle()}),i.preventDefault()}).on("mouseup vmouseup",function(){e.slideShow.removeClass("cd-draggable")})},n.prototype.animateDraggedImage=function(e,i,n){var t=this,a=t.xPosition-e.pageX,s=Math.ceil(100*a/(n*t.friction)),r=s*(t.frames-1)/100;r=r>0?Math.floor(r):Math.ceil(r);var o=t.visibleFrame+r;0>o?o=t.frames-1:o>t.frames-1&&(o=0),o!=t.visibleFrame&&(t.visibleFrame=o,t.updateFrame(),t.xPosition=e.pageX),t.animating=!1},n.prototype.updateHandle=function(){if(this.handle){var e=100*this.visibleFrame/this.frames;this.handle.animate({left:e+"%"},200)}},n.prototype.updateFrame=function(){var e=-(100*this.visibleFrame/this.frames);i(this.slideShow,"translateX("+e+"%)")};var t=e(".cd-product-viewer-wrapper");t.each(function(){new n(e(this))})}),jQuery(document).ready(function(){if($(".cd-stretchy-nav").length>0){var e=$(".cd-stretchy-nav");e.each(function(){var e=$(this),i=e.find(".cd-nav-trigger");i.on("click",function(i){i.preventDefault(),e.toggleClass("nav-is-visible")})}),$(document).on("click",function(i){!$(i.target).is(".cd-nav-trigger")&&!$(i.target).is(".cd-nav-trigger span")&&e.removeClass("nav-is-visible")})}}),jQuery(document).ready(function(e){function n(){t(e(".cd-headline.letters").find("b")),a(e(".cd-headline"))}function t(n){n.each(function(){var n=e(this),t=n.text().split(""),a=n.hasClass("is-visible");for(i in t)n.parents(".rotate-2").length>0&&(t[i]="<em>"+t[i]+"</em>"),t[i]=a?'<i class="in">'+t[i]+"</i>":"<i>"+t[i]+"</i>";var s=t.join("");n.html(s).css("opacity",1)})}function a(i){var n=u;i.each(function(){var i=e(this);if(i.hasClass("loading-bar"))n=m,setTimeout(function(){i.find(".cd-words-wrapper").addClass("is-loading")},h);else if(i.hasClass("clip")){var t=i.find(".cd-words-wrapper"),a=t.width()+10;t.css("width",a)}else if(!i.hasClass("type")){var r=i.find(".cd-words-wrapper b"),o=0;r.each(function(){var i=e(this).width();i>o&&(o=i)}),i.find(".cd-words-wrapper").css("width",o)}setTimeout(function(){s(i.find(".is-visible").eq(0))},n)})}function s(e){var i=d(e);if(e.parents(".cd-headline").hasClass("type")){var n=e.parent(".cd-words-wrapper");n.addClass("selected").removeClass("waiting"),setTimeout(function(){n.removeClass("selected"),e.removeClass("is-visible").addClass("is-hidden").children("i").removeClass("in").addClass("out")},v),setTimeout(function(){r(i,p)},g)}else if(e.parents(".cd-headline").hasClass("letters")){var t=e.children("i").length>=i.children("i").length?!0:!1;o(e.find("i").eq(0),e,t,f),l(i.find("i").eq(0),i,t,f)}else e.parents(".cd-headline").hasClass("clip")?e.parents(".cd-words-wrapper").animate({width:"2px"},C,function(){c(e,i),r(i)}):e.parents(".cd-headline").hasClass("loading-bar")?(e.parents(".cd-words-wrapper").removeClass("is-loading"),c(e,i),setTimeout(function(){s(i)},m),setTimeout(function(){e.parents(".cd-words-wrapper").addClass("is-loading")},h)):(c(e,i),setTimeout(function(){s(i)},u))}function r(e,i){e.parents(".cd-headline").hasClass("type")?(l(e.find("i").eq(0),e,!1,i),e.addClass("is-visible").removeClass("is-hidden")):e.parents(".cd-headline").hasClass("clip")&&e.parents(".cd-words-wrapper").animate({width:e.width()+10},C,function(){setTimeout(function(){s(e)},w)})}function o(i,n,t,a){if(i.removeClass("in").addClass("out"),i.is(":last-child")?t&&setTimeout(function(){s(d(n))},u):setTimeout(function(){o(i.next(),n,t,a)},a),i.is(":last-child")&&e("html").hasClass("no-csstransitions")){var r=d(n);c(n,r)}}function l(e,i,n,t){e.addClass("in").removeClass("out"),e.is(":last-child")?(i.parents(".cd-headline").hasClass("type")&&setTimeout(function(){i.parents(".cd-words-wrapper").addClass("waiting")},200),n||setTimeout(function(){s(i)},u)):setTimeout(function(){l(e.next(),i,n,t)},t)}function d(e){return e.is(":last-child")?e.parent().children().eq(0):e.next()}function c(e,i){e.removeClass("is-visible").addClass("is-hidden"),i.removeClass("is-hidden").addClass("is-visible")}var u=2500,m=3800,h=m-3e3,f=50,p=150,v=500,g=v+800,C=600,w=1500;n()}),jQuery(document).ready(function(){function e(){return window.getComputedStyle(document.querySelector(".cd-projects-wrapper"),"::before").getPropertyValue("content").replace(/'/g,"").replace(/"/g,"")}function i(){var i=e();if("desktop"==i){var n=d.children("li"),t=n.eq(0).width(),a=Number(d.children("li").eq(1).css("margin-left").replace("px","")),s=(t+a)*(n.length+1)+"px",o=d.children("li.current").index();d.css("width",s),0!=o&&r(d,o*(t+a)+"px")}else d.css("width",""),r(d,0);m=!1}function n(e){var i=e.children(".current"),n=i.index(),t=i.nextAll("li").length,s=i.width(),o=Number(e.children("li").eq(1).css("margin-left").replace("px",""));n=t>4?n+3:n+t-2,translate=n*(s+o)+"px",e.addClass("next"),r(e,translate),e.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){a("next",i,e,t)}),$(".no-csstransitions").length>0&&a("next",i,e,t)}function t(e){var i=e.children(".previous"),n=i.index(),t=i.width(),s=Number(e.children("li").eq(1).css("margin-left").replace("px",""));translate=n*(t+s)+"px",e.addClass("prev"),r(e,translate),e.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){a("prev",i,e)}),$(".no-csstransitions").length>0&&a("prev",i,e)}function a(e,i,n,t){"next"==e?(n.removeClass("next").find(".previous").removeClass("previous"),i.removeClass("current"),t>4?i.addClass("previous").next("li").next("li").next("li").addClass("current"):4==t?i.next("li").next("li").addClass("current").prev("li").prev("li").addClass("previous"):i.next("li").addClass("current").end().addClass("previous")):(n.removeClass("prev").find(".current").removeClass("current"),i.removeClass("previous").addClass("current"),i.prevAll("li").length>2?i.prev("li").prev("li").prev("li").addClass("previous"):!n.children("li").eq(0).hasClass("current")&&n.children("li").eq(0).addClass("previous")),s()}function s(){var e=l.find("li.current");e.is(":first-child")?u.find(".prev").addClass("inactive"):u.find(".prev").removeClass("inactive"),e.nextAll("li").length<3?u.find(".next").addClass("inactive"):u.find(".next").removeClass("inactive")}function r(e,i){e.css({"-moz-transform":"translateX(-"+i+")","-webkit-transform":"translateX(-"+i+")","-ms-transform":"translateX(-"+i+")","-o-transform":"translateX(-"+i+")",transform:"translateX(-"+i+")"})}var o=$(".cd-intro-block"),l=$(".cd-projects-wrapper"),d=l.children(".cd-slider"),c=$(".cd-project-content"),u=$(".cd-slider-navigation"),m=!1;i(),$(window).on("resize",function(){m||(window.requestAnimationFrame?window.requestAnimationFrame(i):i(),m=!0)}),l.on("click",".cd-slider a",function(e){if(e.preventDefault(),jQuery(this).parent("li").next("li").is(".current"))t(d);else if(jQuery(this).parent("li").prev("li").prev("li").prev("li").is(".current"))n(d);else{var i=jQuery(this).attr("href");jQuery(""+i).addClass("is-visible")}}),c.on("click",".close",function(e){e.preventDefault(),c.removeClass("is-visible")}),u.on("click",".next",function(){n(d)}),u.on("click",".prev",function(){t(d)}),$(document).keyup(function(i){var a=e();"37"==i.which&&o.hasClass("projects-visible")&&!u.find(".prev").hasClass("inactive")&&"desktop"==a?t(d):"39"==i.which&&o.hasClass("projects-visible")&&!u.find(".next").hasClass("inactive")&&"desktop"==a?n(d):"27"==i.which&&c.hasClass("is-visible")&&c.removeClass("is-visible")}),d.on("swipeleft",function(){var i=e();u.find(".next").hasClass("inactive")||"desktop"!=i||n(d)}),d.on("swiperight",function(){var i=e();u.find(".prev").hasClass("inactive")||"desktop"!=i||t(d)})});
